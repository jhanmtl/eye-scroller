(this["webpackJsonpeye-scroller"]=this["webpackJsonpeye-scroller"]||[]).push([[0],{207:function(e,t,a){e.exports=a(661)},212:function(e,t,a){},218:function(e,t){},219:function(e,t){},220:function(e,t){},224:function(e,t){},225:function(e,t){},226:function(e,t){},236:function(e,t){},238:function(e,t,a){},661:function(e,t,a){"use strict";a.r(t);var o=a(1),n=a.n(o),i=a(12),r=a.n(i),s=(a(212),a(204)),h=a(201),l=a(202),d=a(206),c=a(205),u=a(9),m=(a(238),[[.08333333,.08333333,.14696938,.09797959],[.08333333,.25,.14696938,.09797959],[.08333333,.41666667,.14696938,.09797959],[.08333333,.58333333,.14696938,.09797959],[.08333333,.75,.14696938,.09797959],[.08333333,.91666667,.14696938,.09797959],[.25,.08333333,.14696938,.09797959],[.25,.25,.14696938,.09797959],[.25,.41666667,.14696938,.09797959],[.25,.58333333,.14696938,.09797959],[.25,.75,.14696938,.09797959],[.25,.91666667,.14696938,.09797959],[.41666667,.08333333,.14696938,.09797959],[.41666667,.25,.14696938,.09797959],[.41666667,.41666667,.14696938,.09797959],[.41666667,.58333333,.14696938,.09797959],[.41666667,.75,.14696938,.09797959],[.41666667,.91666667,.14696938,.09797959],[.58333333,.08333333,.14696938,.09797959],[.58333333,.25,.14696938,.09797959],[.58333333,.41666667,.14696938,.09797959],[.58333333,.58333333,.14696938,.09797959],[.58333333,.75,.14696938,.09797959],[.58333333,.91666667,.14696938,.09797959],[.75,.08333333,.14696938,.09797959],[.75,.25,.14696938,.09797959],[.75,.41666667,.14696938,.09797959],[.75,.58333333,.14696938,.09797959],[.75,.75,.14696938,.09797959],[.75,.91666667,.14696938,.09797959],[.91666667,.08333333,.14696938,.09797959],[.91666667,.25,.14696938,.09797959],[.91666667,.41666667,.14696938,.09797959],[.91666667,.58333333,.14696938,.09797959],[.91666667,.75,.14696938,.09797959],[.91666667,.91666667,.14696938,.09797959]]),f=a(19),y=a.n(f),g=a(76),p=a(57),w=a(16),v=Object(p.createMuiTheme)({palette:{primary:{main:"#005582"},secondary:{main:"#11cb5f"}}});function b(e){return n.a.createElement("div",{style:{marginTop:20}},n.a.createElement(w.ThemeProvider,{theme:v},n.a.createElement(g.Button,{variant:"contained",color:"primary",onClick:e.onClick,disabled:e.disabled},e.children)))}var k=Object(p.createMuiTheme)({palette:{primary:{main:"#005582"},secondary:{main:"#11cb5f"}}});function x(e){return n.a.createElement("div",{style:{marginTop:10}},n.a.createElement(w.ThemeProvider,{theme:k},n.a.createElement(g.Button,{variant:"outlined",color:"primary",onClick:e.onClick,disabled:e.disabled},e.children)))}var I=a(203),T=a.n(I),C=["This is a demonstration of combining Tensorflow and React to create an intelligent interface where the scrolling action of a document is controlled by the blinking movement of the user's eyes. See github link for details","\n","blink to scroll down","=====================================================","text below is a publicly available excerpt of the Martian from Andy Weir's website","\n","Chapter 1","Six days into what should be the greatest two months of my life, and it\u2019s turned into a nightmare.","I don\u2019t even know who\u2019ll read this. I guess someone will find it eventually. Maybe a hundred years from now.","For the record .\u2008.\u2008. I didn\u2019t die on Sol 6. Certainly the rest of the crew thought I did, and I can\u2019t blame them. Maybe there\u2019ll be a day of national mourning for me, and my Wikipedia page will say, \u201cMark Watney is the only human being to have died on Mars.\u201d","And it\u2019ll be right, probably. \u2019Cause I\u2019ll surely die here. Just not on Sol 6 when everyone thinks I did.","Let\u2019s see .\u2008.\u2008. where do I begin?","The Ares Program. Mankind reaching out to Mars to send people to another planet for the very first time and expand the horizons of humanity blah, blah, blah. The Ares 1 crew did their thing and came back heroes. They got the parades and fame and love of the world.","Ares 2 did the same thing, in a different location on Mars. They got a firm handshake and a hot cup of coffee when they got home.","Ares 3. Well, that was my mission. Okay, not mine per se. Commander Lewis was in charge. I was just one of her crew. Actually, I was the very lowest ranked member of the crew. I would only be \u201cin command\u201d of the mission if I were the only remaining person.","What do you know? I\u2019m in command.","I wonder if this log will be recovered before the rest of the crew die of old age. I presume they got back to Earth all right. Guys, if you\u2019re reading this: It wasn\u2019t your fault. You did what you had to do. In your position I would have done the same thing. I don\u2019t blame you, and I\u2019m glad you survived.","I guess I should explain how Mars missions work, for any layman who may be reading this. We got to Earth orbit the normal way, through an ordinary ship to Hermes. All the Ares missions use Hermes to get to and from Mars. It\u2019s really big and cost a lot so NASA built only one.","Once we got to Hermes, four additional unmanned missions brought us fuel and supplies while we prepared for our trip. Once everything was a go, we set out for Mars. But not very fast. Gone are the days of heavy chemical fuel burns and trans-Mars injection orbits.","Hermes is powered by ion engines. They throw argon out the back of the ship really fast to get a tiny amount of acceleration. The thing is, it doesn\u2019t take much reactant mass, so a little argon (and a nuclear reactor to power things) let us accelerate constantly the whole way there. You\u2019d be amazed at how fast you can get going with a tiny acceleration over a long time.","I could regale you with tales of how we had great fun on the trip, but I won\u2019t. I don\u2019t feel like reliving it right now. Suffice it to say we got to Mars 124 days later without strangling each other.","From there, we took the MDV (Mars descent vehicle) to the surface. The MDV is basically a big can with some light thrusters and parachutes attached. Its sole purpose is to get six humans from Mars orbit to the surface without killing any of them.","And now we come to the real trick of Mars exploration: having all of our shit there in advance.","A total of fourteen unmanned missions deposited everything we would need for surface operations. They tried their best to land all the supply vessels in the same general area, and did a reasonably good job. Supplies aren\u2019t nearly so fragile as humans and can hit the ground really hard. But they tend to bounce around a lot.","Naturally, they didn\u2019t send us to Mars until they\u2019d confirmed that all the supplies had made it to the surface and their containers weren\u2019t breached. Start to finish, including supply missions, a Mars mission takes about three years. In fact, there were Ares 3 supplies en route to Mars while the Ares 2 crew were on their way home.","The most important piece of the advance supplies, of course, was the MAV. The Mars ascent vehicle. That was how we would get back to Hermes after surface operations were complete. The MAV was soft-landed (as opposed to the balloon bounce-fest the other supplies had). Of course, it was in constant communication with Houston, and if there had been any problems with it, we would have passed by Mars and gone home without ever landing.","The MAV is pretty cool. Turns out, through a neat set of chemical reactions with the Martian atmosphere, for every kilogram of hydrogen you bring to Mars, you can make thirteen kilograms of fuel. It\u2019s a slow process, though. It takes twenty-four months to fill the tank. That\u2019s why they sent it long before we got here.","You can imagine how disappointed I was when I discovered the MAV was gone.","It was a ridiculous sequence of events that led to me almost dying, and an even more ridiculous sequence that led to me surviving.","The mission is designed to handle sandstorm gusts up to 150 kph. So Houston got understandably nervous when we got whacked with 175 kph winds. We all got in our flight space suits and huddled in the middle of the Hab, just in case it lost pressure. But the Hab wasn\u2019t the problem.","The MAV is a spaceship. It has a lot of delicate parts. It can put up with storms to a certain extent, but it can\u2019t just get sandblasted forever. After an hour and a half of sustained wind, NASA gave the order to abort. Nobody wanted to stop a monthlong mission after only six days, but if the MAV took any more punishment, we\u2019d all have gotten stranded down there.","We had to go out in the storm to get from the Hab to the MAV. That was going to be risky, but what choice did we have?","Everyone made it but me.","Our main communications dish, which relayed signals from the Hab to Hermes, acted like a parachute, getting torn from its foundation and carried with the torrent. Along the way, it crashed through the reception antenna array. Then one of those long thin antennae slammed into me end-first. It tore through my suit like a bullet through butter, and I felt the worst pain of my life as it ripped open my side. I vaguely remember having the wind knocked out of me (pulled out of me, really) and my ears popping painfully as the pressure of my suit escaped.","The last thing I remember was seeing Johanssen hopelessly reaching out toward me.","I awoke to the oxygen alarm in my suit. A steady, obnoxious beeping that eventually roused me from a deep and profound desire to just fucking die.","The storm had abated; I was facedown, almost totally buried in sand. As I groggily came to, I wondered why I wasn\u2019t more dead.","The antenna had enough force to punch through the suit and my side, but it had been stopped by my pelvis. So there was only one hole in the suit (and a hole in me, of course).","I had been knocked back quite a ways and rolled down a steep hill. Somehow I landed facedown, which forced the antenna to a strongly oblique angle that put a lot of torque on the hole in the suit. It made a weak seal.","Then, the copious blood from my wound trickled down toward the hole. As the blood reached the site of the breach, the water in it quickly evaporated from the airflow and low pressure, leaving a gunky residue behind. More blood came in behind it and was also reduced to gunk. Eventually, it sealed the gaps around the hole and reduced the leak to something the suit could counteract.","The suit did its job admirably. Sensing the drop in pressure, it constantly flooded itself with air from my nitrogen tank to equalize. Once the leak became manageable, it only had to trickle new air in slowly to relieve the air lost.","After a while, the CO2 (carbon dioxide) absorbers in the suit were expended. That\u2019s really the limiting factor to life support. Not the amount of oxygen you bring with you, but the amount of CO2 you can remove. In the Hab, I have the oxygenator, a large piece of equipment that breaks apart CO2 to give the oxygen back. But the space suits have to be portable, so they use a simple chemical absorption process with expendable filters. I\u2019d been asleep long enough that my filters were useless.","The suit saw this problem and moved into an emergency mode the engineers call \u201cbloodletting.\u201d Having no way to separate out the CO2, the suit deliberately vented air to the Martian atmosphere, then backfilled with nitrogen. Between the breach and the bloodletting, it quickly ran out of nitrogen. All it had left was my oxygen tank.","So it did the only thing it could to keep me alive. It started backfilling with pure oxygen. I now risked dying from oxygen toxicity, as the excessively high amount of oxygen threatened to burn up my nervous system, lungs, and eyes. An ironic death for someone with a leaky space suit: too much oxygen.","Every step of the way would have had beeping alarms, alerts, and warnings. But it was the high-oxygen warning that woke me.","The sheer volume of training for a space mission is astounding. I\u2019d spent a week back on Earth practicing emergency space suit drills. I knew what to do.","Carefully reaching to the side of my helmet, I got the breach kit. It\u2019s nothing more than a funnel with a valve at the small end and an unbelievably sticky resin on the wide end. The idea is you have the valve open and stick the wide end over a hole. The air can escape through the valve, so it doesn\u2019t interfere with the resin making a good seal. Then you close the valve, and you\u2019ve sealed the breach.","The tricky part was getting the antenna out of the way. I pulled it out as fast as I could, wincing as the sudden pressure drop dizzied me and made the wound in my side scream in agony.","I got the breach kit over the hole and sealed it. It held. The suit backfilled the missing air with yet more oxygen. Checking my arm readouts, I saw the suit was now at 85 percent oxygen. For reference, Earth\u2019s atmosphere is about 21 percent. I\u2019d be okay, so long as I didn\u2019t spend too much time like that.","I stumbled up the hill back toward the Hab. As I crested the rise, I saw something that made me very happy and something that made me very sad: The Hab was intact (yay!) and the MAV was gone (boo!).","Right that moment I knew I was screwed. But I didn\u2019t want to just die out on the surface. I limped back to the Hab and fumbled my way into an airlock. As soon as it equalized, I threw off my helmet.","Once inside the Hab, I doffed the suit and got my first good look at the injury. It would need stitches. Fortunately, all of us had been trained in basic medical procedures, and the Hab had excellent medical supplies. A quick shot of local anesthetic, irrigate the wound, nine stitches, and I was done. I\u2019d be taking antibiotics for a couple of weeks, but other than that I\u2019d be fine.","I knew it was hopeless, but I tried firing up the communications array. No signal, of course. The primary satellite dish had broken off, remember? And it took the reception antennae with it. The Hab had secondary and tertiary communications systems, but they were both just for talking to the MAV, which would use its much more powerful systems to relay to Hermes. Thing is, that only works if the MAV is still around.","I had no way to talk to Hermes. In time, I could locate the dish out on the surface, but it would take weeks for me to rig up any repairs, and that would be too late. In an abort, Hermes would leave orbit within twenty-four hours. The orbital dynamics made the trip safer and shorter the earlier you left, so why wait?","Checking out my suit, I saw the antenna had plowed through my bio-monitor computer. When on an EVA, all the crew\u2019s suits are networked so we can see each other\u2019s status. The rest of the crew would have seen the pressure in my suit drop to nearly zero, followed immediately by my bio-signs going flat. Add to that watching me tumble down a hill with a spear through me in the middle of a sandstorm .\u2008.\u2008. yeah. They thought I was dead. How could they not?","They may have even had a brief discussion about recovering my body, but regulations are clear. In the event a crewman dies on Mars, he stays on Mars. Leaving his body behind reduces weight for the MAV on the trip back. That means more disposable fuel and a larger margin of error for the return thrust. No point in giving that up for sentimentality.","So that\u2019s the situation. I\u2019m stranded on Mars. I have no way to communicate with Hermes or Earth. Everyone thinks I\u2019m dead. I\u2019m in a Hab designed to last thirty-one days.","If the oxygenator breaks down, I\u2019ll suffocate. If the water reclaimer breaks down, I\u2019ll die of thirst. If the Hab breaches, I\u2019ll just kind of explode. If none of those things happen, I\u2019ll eventually run out of food and starve to death.","So yeah. I\u2019m fucked.","Chapter 2","LOG ENTRY: SOL 7","Okay, I\u2019ve had a good night\u2019s sleep, and things don\u2019t seem as hopeless as they did yesterday.","Today I took stock of supplies and did a quick EVA to check up on the external equipment. Here\u2019s my situation:","The surface mission was supposed to be thirty-one days. For redundancy, the supply probes had enough food to last the whole crew fifty-six days. That way if one or two probes had problems, we\u2019d still have enough food to complete the mission.","We were six days in when all hell broke loose, so that leaves enough food to feed six people for fifty days. I\u2019m just one guy, so it\u2019ll last me three hundred days. And that\u2019s if I don\u2019t ration it. So I\u2019ve got a fair bit of time.","I\u2019m pretty flush on EVA suits, too. Each crew member had two space suits: a flight spacesuit to wear during descent and ascent, and the much bulkier and more robust EVA suit to wear when doing surface operations. My flight spacesuit has a hole in it, and of course the crew was wearing the other five when they returned to Hermes. But all six EVA suits are still here and in perfect condition"],R=(a(567),a(568),function(e){Object(d.a)(a,e);var t=Object(c.a)(a);function a(e){var o;return Object(h.a)(this,a),(o=t.call(this,e)).setCropProps=function(e){o.videoHeight=e.getVideoTracks()[0].getSettings().height,o.videoWidth=e.getVideoTracks()[0].getSettings().width;var t=o.videoWidth/2,a=o.videoHeight/2;o.cropDim=o.destDim/o.sf,o.videoOriginX=t-o.cropDim/2,o.videoOriginY=a-o.cropDim/2},o.startWebcam=function(){navigator.mediaDevices.getUserMedia&&navigator.mediaDevices.getUserMedia({video:!0,audio:!1}).then((function(e){o.videoRef.current.srcObject=e,o.videoRef.current.style.display="none",o.inputCanvasRef.current.style.display="none",o.setCropProps(e),o.synchroPredict()}))},o.cropToCanvas=function(){o.inputCtx.drawImage(o.videoRef.current,o.videoOriginX,o.videoOriginY,o.cropDim,o.cropDim,0,0,o.destDim,o.destDim)},o.parsePredictions=function(e){var t=e[0];o.confidence=t.reshape([36]);var a=e[1];a=a.reshape([36,4]);var n=u.split(a,4,1);o.gcx=n[0],o.gcy=n[1],o.gw=n[2],o.gh=n[3]},o.recoverBboxes=function(){var e=u.add(u.mul(o.gcx,o.what),o.cxhat),t=u.add(u.mul(o.gcy,o.hhat),o.cyhat),a=u.mul(u.exp(o.gw),o.what),n=u.mul(u.exp(o.gh),o.hhat),i=u.cast(u.mul(u.sub(e,u.div(a,2)),224),"int32"),r=u.cast(u.mul(u.sub(t,u.div(n,2)),224),"int32"),s=u.cast(u.mul(u.add(e,u.div(a,2)),224),"int32"),h=u.cast(u.mul(u.add(t,u.div(n,2)),224),"int32");o.bboxes=u.concat([r,i,h,s],1)},o.boxCrop=function(e,t){var a=(e[1]+e[3])/2,n=(e[0]+e[2])/2,i=e[2]-e[0],r=e[3]-e[1],s=Math.max(i,r),h=a-(s+=10)/2,l=n-s/2;t.drawImage(o.inputCanvasRef.current,h,l,s,s,0,0,o.eyeDim,o.eyeDim)},o.logRatioHistory=function(e,t){o.leftRatioHistory.length<2?o.leftRatioHistory.push(e):(o.leftRatioHistory[0]=o.leftRatioHistory[1],o.leftRatioHistory[1]=e),o.rightRatioHistory.length<2?o.rightRatioHistory.push(t):(o.rightRatioHistory[0]=o.rightRatioHistory[1],o.rightRatioHistory[1]=t)},o.percentDiff=function(e){return(e[0]-e[1])/(e[0]+1e-5)},o.synchroPredict=function(){var e=performance.now();e-o.state.timeLastBlinked>1e3&&o.setState({numBlinks:0}),u.tidy((function(){o.cropToCanvas(),o.updateOutputCanvas();var e=o.prepDetectorInput(o.inputCanvasRef.current),t=o.detectorModel.predict(e),a=o.getBoxesAndScores(t),n=Object(s.a)(a,4),i=n[0],r=n[1],h=n[2],l=n[3];if(i>o.threshold&&r>o.threshold){o.visualize(i,r,h,l),o.boxCrop(h,o.leftCtx),o.boxCrop(l,o.rightCtx);var d=o.predictLandmarks(o.leftCanvasRef.current),c=o.drawLandmarks(d,o.leftCtx,"rgb(0,255,255)"),u=o.predictLandmarks(o.rightCanvasRef.current),m=o.drawLandmarks(u,o.rightCtx,"rgb(0,255,255)");o.logRatioHistory(c,m);var f=o.percentDiff(o.leftRatioHistory),y=o.percentDiff(o.rightRatioHistory);console.log("left: ",o.leftRatioHistory,f),console.log("right: ",o.rightRatioHistory,y);performance.now();(f>.35||y>.35)&&o.scrollDown()}else o.fillBlack();console.log(o.state.numBlinks)}));var t=performance.now();o.logFps(e,t),window.requestAnimationFrame(o.synchroPredict)},o.scrollDown=function(){o.scrollRef.current.scrollTo(0,o.state.scrollPos);var e=Math.min(o.state.scrollPos+50,2995);e<2995?o.setState({scrollPos:e}):o.setState({scrollPos:0})},o.scrollToTop=function(){o.scrollRef.current.scrollToTop(),o.setState({scrollPos:50})},o.priorsTensor=void 0,o.detectorModel=void 0,o.landmarksModel=void 0,o.cxhat=void 0,o.cyhat=void 0,o.what=void 0,o.hhat=void 0,o.confidence=void 0,o.gcx=void 0,o.gcy=void 0,o.gw=void 0,o.gh=void 0,o.bboxes=void 0,o.videoRef=n.a.createRef(),o.inputCanvasRef=n.a.createRef(),o.outputCanvasRef=n.a.createRef(),o.leftCanvasRef=n.a.createRef(),o.rightCanvasRef=n.a.createRef(),o.inputCtx=void 0,o.outputCtx=void 0,o.leftCtx=void 0,o.rightCtx=void 0,o.leftTextRef=n.a.createRef(),o.rightTextRef=n.a.createRef(),o.fpsTextRef=n.a.createRef(),o.blinkTextRef=n.a.createRef(),o.scrollRef=n.a.createRef(),o.videoHeight=void 0,o.videoWidth=void 0,o.videoOriginX=void 0,o.videoOriginY=void 0,o.cropDim=void 0,o.destDim=224,o.sf=1,o.eyeDim=112,o.landmarkCount=4,o.threshold=.6,o.nmsSigma=.025,o.leftRatioHistory=[],o.rightRatioHistory=[],o.state={blinkTimeStamps:[],scrollPos:50},o}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.priorsTensor=u.tensor2d(m);var t=u.split(this.priorsTensor,4,1);this.cxhat=t[0],this.cyhat=t[1],this.what=t[2],this.hhat=t[3],u.loadLayersModel("https://raw.githubusercontent.com/jhanmtl/eye-scroller/master/public/detectorModel.json").then((function(t){e.detectorModel=t})),u.loadLayersModel("https://raw.githubusercontent.com/jhanmtl/eye-scroller/master/public/landmarkModel3.json").then((function(t){e.landmarksModel=t})),this.inputCtx=this.inputCanvasRef.current.getContext("2d"),this.outputCtx=this.outputCanvasRef.current.getContext("2d"),this.leftCtx=this.leftCanvasRef.current.getContext("2d"),this.rightCtx=this.rightCanvasRef.current.getContext("2d"),this.fillBlack(),console.log(u.getBackend())}},{key:"drawBox",value:function(e,t){var a=e[1],o=e[0],n=e[3]-e[1],i=e[2]-e[0];this.outputCtx.strokeStyle=t,this.outputCtx.lineWidth=2,this.outputCtx.strokeRect(a,o,n,i)}},{key:"drawCenter",value:function(e,t){var a=(e[0]+e[2])/2,o=(e[1]+e[3])/2;this.outputCtx.beginPath(),this.outputCtx.arc(o,a,5,0,2*Math.PI,!1),this.outputCtx.lineWidth=2,this.outputCtx.strokeStyle=t,this.outputCtx.stroke()}},{key:"visualize",value:function(e,t,a,o){this.drawBox(a,"rgb(0,255,0)"),this.drawBox(o,"rgb(0,255,0)"),this.leftTextRef.current.innerText="left eye confidence: "+(100*e).toFixed(2)+"%",this.rightTextRef.current.innerText="right eye confidence: "+(100*t).toFixed(2)+"%"}},{key:"updateOutputCanvas",value:function(){this.outputCtx.drawImage(this.inputCanvasRef.current,0,0,this.destDim,this.destDim,0,0,this.destDim,this.destDim)}},{key:"prepDetectorInput",value:function(e){var t=u.expandDims(u.browser.fromPixels(e),0);return t=u.cast(t,"float32"),t=u.div(t,127.5),t=u.sub(t,1)}},{key:"prepLandmarkInputSingle",value:function(e){var t=u.expandDims(u.browser.fromPixels(e),0);return t=u.cast(t,"float32"),t=u.div(t,127.5),t=u.sub(t,1)}},{key:"getBoxesAndScores",value:function(e){this.parsePredictions(e),this.recoverBboxes();var t=this.bboxes.arraySync(),a=u.image.nonMaxSuppressionWithScore(this.bboxes,this.confidence,2,void 0,void 0,this.nmsSigma),o=a.selectedIndices;o=o.dataSync();var n,i,r=a.selectedScores,s=(r=r.dataSync())[0],h=r[1];return t[o[0]][1]<t[o[1]][1]?(n=t[o[1]],i=t[o[0]]):(n=t[o[0]],i=t[o[1]]),[s,h,n,i]}},{key:"logFps",value:function(e,t){var a=(t-e)/1e3,o=Math.round(1/a);this.fpsTextRef.current.innerText="fps: "+o}},{key:"predictLandmarks",value:function(e){var t=this.prepLandmarkInputSingle(e),a=this.landmarksModel.predict(t);return a=u.cast(a,"int32"),(a=u.reshape(a,[this.landmarkCount,2])).arraySync()}},{key:"fillBlack",value:function(){this.leftCtx.fillStyle="rgb(0,0,0)",this.rightCtx.fillStyle="rgb(0,0,0)",this.leftCtx.fillRect(0,0,this.eyeDim,this.eyeDim),this.rightCtx.fillRect(0,0,this.eyeDim,this.eyeDim)}},{key:"drawLandmarks",value:function(e,t,a){t.fillStyle="rgb(0,0,0)",t.fillRect(0,0,this.eyeDim,this.eyeDim);for(var o=0;o<e.length;o++){t.beginPath();var n=e[o],i=n[0],r=n[1];t.arc(i,r,2,0,2*Math.PI),t.fillStyle=a,t.fill()}for(var s=0;s<e.length;s++){var h=e[s],l=void 0;l=s===e.length-1?e[0]:e[s+1],t.beginPath(),t.moveTo(h[0],h[1]),t.lineTo(l[0],l[1]),t.strokeStyle=a,t.stroke()}var d=e[1],c=e[3],u=(d[0]+c[0])/2,m=(d[1]+c[1])/2,f=Math.abs(c[1]-d[1]),y=f/2,g=e[0],p=e[2],w=Math.abs(g[0]-p[0]);return t.beginPath(),t.arc(u,m,y,0,2*Math.PI),t.strokeStyle=a,t.stroke(),t.beginPath(),t.arc(u,m,y/2,0,2*Math.PI),t.fillStyle=a,t.fill(),f/(w+.001)}},{key:"formatText",value:function(){for(var e=[],t=0;t<C.length;t++)t<3?e.push(n.a.createElement("p",{key:t,className:"headerNotes"},C[t])):4===t?e.push(n.a.createElement("p",{key:t,className:"smallNote"},C[t])):e.push(n.a.createElement("p",{key:t,className:"note"},C[t]));return e}},{key:"render",value:function(){return n.a.createElement("div",{className:"App"},n.a.createElement("div",{className:"overall"},n.a.createElement("div",{className:"controlPanel"},n.a.createElement(y.a,{className:"controlPaper",elevation:4},n.a.createElement("p",{className:"title"},"blink detector: tensorflowjs + react"),n.a.createElement("p",{className:"note"},"eye detection"),n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"videoUnderlay"},n.a.createElement("video",{id:"webCam",autoPlay:!0,ref:this.videoRef})),n.a.createElement("div",{className:"input"},n.a.createElement("canvas",{id:"inputCanvasId",className:"inputCanvas",width:224,height:224,ref:this.inputCanvasRef})),n.a.createElement("div",{className:"output"},n.a.createElement("canvas",{className:"outputCanvas",width:224,height:224,ref:this.outputCanvasRef})),n.a.createElement("p",{className:"note"},"eye extraction"),n.a.createElement("div",null,n.a.createElement("canvas",{className:"leftEyeCanvas",width:this.eyeDim,height:this.eyeDim,ref:this.leftCanvasRef}),n.a.createElement("canvas",{className:"rightEyeCanvas",width:this.eyeDim,height:this.eyeDim,ref:this.rightCanvasRef})),n.a.createElement(b,{onClick:this.startWebcam},"start model"),n.a.createElement("p",{className:"note",ref:this.leftTextRef},"left eye confidence:"),n.a.createElement("p",{className:"note",ref:this.rightTextRef},"right eye confidence:"),n.a.createElement("p",{className:"note",ref:this.fpsTextRef},"fps:"),n.a.createElement("a",{href:"https://github.com/jhanmtl/eye-detector",className:"note"},"github repo")))),n.a.createElement("div",{className:"textWindow"},n.a.createElement(y.a,{className:"textPaper",elevation:4},n.a.createElement("div",{className:"textContent"},n.a.createElement(T.a,{ref:this.scrollRef,minimalThumbSize:10,maximalThumbSize:12},n.a.createElement("div",{className:"textBox"},this.formatText()))),n.a.createElement(x,{onClick:this.scrollToTop,style:{}},"back to top")))))}}]),a}(n.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(R,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[207,1,2]]]);
//# sourceMappingURL=main.3c9cbd7d.chunk.js.map